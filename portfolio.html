<!DOCTYPE html>
<html lang="fr">
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">      <!-- pour les patsilles ?-->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dorine Becker – Portfolio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body class="portfolio">

<header>
  <nav>
    <button id="menu-toggle" aria-label="Afficher le menu" aria-expanded="false">☰</button>
    <ul id="menu">
      <li><a href="index.html">Accueil</a></li>
      <li><a href="portfolio.html">Portfolio</a></li>
      <li><a href="projets.html">Projets</a></li>
      <li><a href="a_propos.html">À propos</a></li>
    </ul>
  </nav>
</header>

<main>
  	<!-- Boutons de catégories supprimés -->
	<!-- <div class="portfolio-nav" id="nav-buttons"></div> -->
 
    <!-- Les boutons de catégories seront générés ici -->
  </div>

  <h1 id="page-title"></h1>
  <div class="projets-grid" id="projets-container"></div>
</main>

<!-- Lightbox -->
<div id="lightbox">
  <button id="close-lightbox" aria-label="Fermer">&times;</button>
  <img src="" alt="" id="lightbox-image" />
  <p id="lightbox-text"></p>
</div>

<!-- Script catégories -->
<script src="categories.js"></script>

<script>
const titleEl = document.getElementById('page-title');
const container = document.getElementById('projets-container');
const navButtons = document.getElementById('nav-buttons');

const pageName = "portfolio";
const categories = allCategories[pageName];

// --- Génère les boutons dynamiquement ---
// Object.keys(categories).forEach(catKey => {
//   const btn = document.createElement('a');
//   btn.id = `btn-${catKey}`;
//   btn.textContent = categories[catKey].title;
//   btn.addEventListener('click', () => loadCategory(catKey));
//   navButtons.appendChild(btn);
// });


// --- Vue index du portfolio (vignette = première image de chaque dossier) ---
function loadPortfolioIndex() {
  titleEl.textContent = "Portfolio";
  container.innerHTML = "";

  Object.entries(categories).forEach(([key, cat]) => {
    if (!cat.vignette) return;

    const wrapper = document.createElement("div");
    wrapper.className = "vignette-wrapper";

    const a = document.createElement("a");
    a.className = "vignette";
    a.href = `portfolio.html?cat=${key}`;
    a.innerHTML = `<img src="${cat.vignette}" alt="${cat.title}">`;

    const title = document.createElement("div");
    title.className = "vignette-title";
    title.textContent = cat.title;

    wrapper.appendChild(a);
    wrapper.appendChild(title);
    container.appendChild(wrapper);
  });
}

// --- Fonction pour charger toutes les images d'une catégorie ---
function loadCategory(catKey) {
  const cat = categories[catKey];
  if (!cat) return;

  titleEl.style.opacity = 0;
  container.style.opacity = 0;

  setTimeout(() => {
    titleEl.textContent = cat.title;
    container.innerHTML = "";

    cat.files.forEach((file, i) => {
      const wrapper = document.createElement("div");
      wrapper.className = "vignette-wrapper";

      const a = document.createElement("a");
      a.className = "vignette";
      a.href = "#";
      a.innerHTML = `<img src="${cat.dir}${file}" alt="${cat.names[i]}">`;

      a.addEventListener('click', e => {
        e.preventDefault();
        document.getElementById('lightbox-image').src = cat.dir + file;
        document.getElementById('lightbox-text').textContent = cat.desc[i];
        document.getElementById('lightbox').style.display = 'flex';
      });

      const title = document.createElement("div");
      title.className = "vignette-title";
      title.textContent = cat.names[i];

      wrapper.appendChild(a);
      wrapper.appendChild(title);
      container.appendChild(wrapper);
    });

    titleEl.style.opacity = 1;
    container.style.opacity = 1;
  }, 200);
}

// --- Chargement initial ---
const params = new URLSearchParams(window.location.search);
const initialCat = params.get('cat');
if (initialCat && categories[initialCat]) {
  loadCategory(initialCat);
} else {
  loadPortfolioIndex();
}

// --- Lightbox ---
document.getElementById('close-lightbox').addEventListener('click', () => {
  document.getElementById('lightbox').style.display = 'none';
});
document.getElementById('lightbox').addEventListener('click', (e) => {
  if (e.target.id === 'lightbox') e.currentTarget.style.display = 'none';
});
</script>

</body>
</html>
