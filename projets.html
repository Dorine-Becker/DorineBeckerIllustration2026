<!DOCTYPE html>
<html lang="fr">
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">      <!-- pour les patsilles ?-->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dorine Becker – Projets</title>
  <link rel="stylesheet" href="style.css" />
  
</head>
	
<body class="projets">
<!--nouveau menu factorisé-->
	<div id="menu-container"></div>

<!--suppression pour soigner hamburger-->
<!--<header>
  <nav>
    <button id="menu-toggle" aria-label="Afficher le menu" aria-expanded="false">☰</button>
    <ul id="menu">
      <li><a href="index.html">Accueil</a></li>
      <li><a href="projets.html">projets</a></li>
      <li><a href="projets.html">Projets</a></li>
      <li><a href="a_propos.html">À propos</a></li>
    </ul>
  </nav>
</header>
-->
	
<main>
 
    <!-- Les boutons de catégories seront générés ici -->
  </div>

  <h1 id="page-title"></h1>
  <div class="projets-grid" id="projets-container"></div>
</main>

<!-- Lightbox -->
<div id="lightbox">
  <button id="close-lightbox" aria-label="Fermer">&times;</button>
  <img src="" alt="" id="lightbox-image" />
  <p id="lightbox-text"></p>
</div>

<!-- Script catégories -->
<script src="categories.js"></script>

<script>
const titleEl = document.getElementById('page-title');
const container = document.getElementById('projets-container');
const navButtons = document.getElementById('nav-buttons');

const pageName = "projets";
const categories = allCategories[pageName];



// --- Vue index du projets (vignette = première image de chaque dossier) ---
function loadprojetsIndex() {
  titleEl.textContent = "Projets";
  container.innerHTML = "";

  Object.entries(categories).forEach(([key, cat]) => {
    if (!cat.vignette) return;

    const wrapper = document.createElement("div");
    wrapper.className = "vignette-wrapper";

    const a = document.createElement("a");
    a.className = "vignette";
    a.href = `projets.html?cat=${key}`;
    a.innerHTML = `<img src="${cat.vignette}" alt="${cat.title}">`;

    const title = document.createElement("div");
    title.className = "vignette-title";
    title.textContent = cat.title;

    wrapper.appendChild(a);
    wrapper.appendChild(title);
    container.appendChild(wrapper);
  });
}

// --- Fonction pour charger toutes les images d'une catégorie ---
function loadCategory(catKey) {
  const cat = categories[catKey];
  if (!cat) return;

  titleEl.style.opacity = 0;
  container.style.opacity = 0;

  setTimeout(() => {
    titleEl.textContent = cat.title;
    container.innerHTML = "";

    // --- Inclure la vignette comme première image ---
    const allFiles = [cat.vignette.split('/').pop(), ...cat.files];
    const allDesc = cat.desc; // déjà complet avec vignette + autres images


    allFiles.forEach((file, i) => {
      const wrapper = document.createElement("div");
      wrapper.className = "vignette-wrapper";

      const a = document.createElement("a");
      a.className = "vignette";
      a.href = "#";
      a.innerHTML = `<img src="${cat.dir}${file}" alt="">`; // alt vide, pas de nom affiché

      a.addEventListener('click', e => {
        e.preventDefault();
        document.getElementById('lightbox-image').src = cat.dir + file;
        document.getElementById('lightbox-text').textContent = allDesc[i] || "";

        document.getElementById('lightbox').style.display = 'flex';
      });

      wrapper.appendChild(a);
      container.appendChild(wrapper);
    });

    titleEl.style.opacity = 1;
    container.style.opacity = 1;
  }, 200);
}

// --- Chargement initial ---
const params = new URLSearchParams(window.location.search);
const initialCat = params.get('cat');
if (initialCat && categories[initialCat]) {
  loadCategory(initialCat);
} else {
  loadprojetsIndex();
}

// --- Lightbox ---
document.getElementById('close-lightbox').addEventListener('click', () => {
  document.getElementById('lightbox').style.display = 'none';
});
document.getElementById('lightbox').addEventListener('click', (e) => {
  if (e.target.id === 'lightbox') e.currentTarget.style.display = 'none';
});
</script>

	  
	<!-- BON BLOC pour les pastilles -->
	<div class="contact-home">
  <a href="mailto:gnrsgn@gmail.com" class="footer-button mail">
    <i class="fa-solid fa-envelope"></i>
  </a>
  <a href="tel:0767205436" class="footer-button phone">
    <i class="fa-solid fa-phone"></i>
  </a>
  <a href="https://www.instagram.com/dnine_art" target="_blank" class="footer-button instagram">
    <i class="fa-brands fa-instagram"></i>
  </a>
	</div>
<link rel="stylesheet" href="menu.css">
<script src="menu.js"></script>

	<!--nouveau menu factorisé-->
<script>
  fetch("menu.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("menu-container").innerHTML = html;
    });
</script>


</body>
</html>
